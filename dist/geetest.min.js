!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):t.Geetest=e(t.React)}(this,function(t){"use strict";function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t=t&&t.hasOwnProperty("default")?t.default:t;var a=function(a){function c(t){var e,r,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),r=this,a=o(c).call(this,t),e=!a||"object"!=typeof a&&"function"!=typeof a?i(r):a,n(i(i(e)),"init",function(){var t=i(i(e)),n="react-geetest";if(window.initGeetest)t.ready();else if(document.getElementById(n))t.wait();else{var o=document.createElement("script");o.id=n,o.type="text/javascript",o.async=!0,o.charset="utf-8",o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,t.ready())}:o.onload=function(){o.onload=null,t.ready()};var r="http:"===window.location.protocol?"http:":"https:";o.src="".concat(r,"//static.geetest.com/static/tools/gt.js?_t=").concat((new Date).getTime());var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a),t.setState({script:o})}}),n(i(i(e)),"wait",function(){var t=i(i(e)),n=t.state,o=n.timer,r=n.count;if(!(o||r>0)){var a=window.setInterval(function(){if(window.initGeetest)return window.clearInterval(a),t.setState({timer:null,count:0}),void window.setTimeout(t.ready.bind(t));var e=t.state.count;(e-=1)<1?(window.clearInterval(a),t.setState({timer:null,count:0})):t.setState({count:e})},100);t.setState({timer:a,count:10})}}),n(i(i(e)),"ready",function(){var t=i(i(e)),n=t.props,o=n.gt,r=n.challenge,a=n.offline,c=n.newCaptcha,u=n.product,l=n.width,s=n.lang,f=n.https,d=n.timeout,p=n.area,y=n.nextWidth,m=n.bgColor,w=t.state.ins;window.initGeetest&&(w?t.load(w):window.initGeetest({gt:o,challenge:r,offline:a,new_captcha:c,product:u,width:l,lang:s,https:f,timeout:d,area:p,next_width:y,bg_color:m},function(e){t.load(e),t.setState({ins:e})}))}),n(i(i(e)),"load",function(t){var n=i(i(e));if(n.dom){var o=n.props,r=o.onReady,a=o.onSuccess,c=o.onError,u=o.onClose;t.appendTo(n.dom),t.onReady(r),t.onSuccess(function(){return a(t.getValidate(),t)}),t.onError(c),t.onClose(u)}}),n(i(i(e)),"destroy",function(){var t=i(i(e)).state.timer;t&&window.clearInterval(t)}),e.dom=null,e.state={ins:null,script:null,timer:null,count:0},e}var u,l,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(c,t.Component),u=c,(l=[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(t,e){this.init()}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"render",value:function(){var e=this,n=e.props.className;return t.createElement("div",{className:n,ref:function(t){e.dom=t}})}}])&&e(u.prototype,l),s&&e(u,s),c}();return n(a,"defaultProps",{className:"i-geetest",offline:!1,newCaptcha:!0,product:"popup",width:"300px",lang:"zh-cn",https:!1,timeout:3e4,nextWidth:"90%",bgColor:"black",onReady:function(){},onSuccess:function(){},onError:function(){},onClose:function(){}}),a});
//# sourceMappingURL=geetest.min.js.map
